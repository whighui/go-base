
package main

/**
华为：
1. golang数组作为参数，会影响外部吗
2. 进程、线程、协程之间通信方式
3. context 和 channel 关系和衍生
4. 子协程panic会影响主协程吗
5. http请求参数和响应参数、熟知状态码

算法：
1. 最大回文字符串

   知乎：
1. 令牌桶实现方式
2. redis_scene aof rdb实现方式
3. redis_scene zset底层数据结构 跳表时间复杂度

场景提：设计一个高并发的积分排行榜

算法： 回文链表

知乎二面：

1. 项目背景：链路层获取或者存储层获取 收集起来
   技术选型：bmq mysql redis abase 协程池、前缀树、令牌桶、通信协议、缓存结构（拉取overpass）
   redis、mysql 双写一致性  redis底层数据结构  AOF追加写机制(每写一条命令进行追加写到AOF文件当中) RDB快照机制(看频率 容易丢数据)
   redis分布式锁怎么实现的
   前缀树
   协程池
   分布式令牌桶  单机令牌桶



角色：维护注册任务、采集服务优化、要求实时性、10点采集数据11点透传到下游
不足：项目比较耦合、
1. CPU有尖刺状态 什么情况导致的 如何优化 如何进行解决 优化数据结构  LRU长度缩短点 利用多级缓存

场景提：
1. 并发高系统 go语言实现  缓存lru实现（实现上正常）  cpu每隔几分钟会有一个尖刺 分析原因  GC原因 分析原因
2. 设计签到系统 千万级QPS 同时运营需求 统计连续多少天签到 连续1、3、5签到 连续一个月签到 还需要历史签到能力做统计分析 半年内每个周五签到情况 redis只存当天的数据 -> mysql -> hive
   设计接口 设计存储 整条链路是怎么样
   千万级QPS数据库压力大了，怎么优化 setbit sing_status zhangsan+23829 1
   暴露签到接口（用户只关心今天已经签到） redis分布式存储 怎么实现的分布式存储（一致性hash）打到异步mq进行mysql存储
3. 高并发排行榜  zset做排序 redis做分布式存储 在最后做归并排序 每日排行、周排行、月排行、历史排行  用户王者荣耀、好友排行、段位排行
4.
-----------------------------------------------------------------------------------------------------------------------
八股：
最多redis zset底层 redis持久化存储（redis怎么保证数据不丢失、写数据处理命令）
网络还行
操作系统也还行  进程、协程、线程
Mysql基本也不问八股

讲一下MVVC 怎么用
每条记录都有一个trx_id
事物开启生成快照 min_txr_id  活跃事物ID  max_trx_id+1（当前活跃事物找到最大值+1）
当前事物要查询记录  在这个事物里查询这条记录的事物ID < min_txr_id 这条记录是可见的
ID>max_trx_id 往前追溯 找到符合规则的记录 事物可见的记录(1.小于trx_id  2.在min和Max区间范围之内，但是不在活跃事物ID当中 存在有的事物执行完了)
更新   当前读
查询   select for update

操作系统：分配内存 golang、c++、c  malloc分配内存  熟悉内存组成
使用两种方式：阈值
大于128K 在mmap区进行分配内存 mmap文件映射区 (free函数之后 mmap可以主动释放、 释放之后交给内核)
小于128K brk函数在堆上进行分配  堆上不能主动释放（回收机制：堆上高地址内存没被释放、地址值内存地址也没被释放（不能给操作系统回收掉）  导致堆上有内存碎片 在申请可以直接使用 可以重复利用 ）

网络:
https:加密过程
状态码：
websocket tcp
*/

/**

黑灰产流量过滤：
1.状态码不是200
2.response-length<200 返回默认值    tlb统一管理


/**


*/

/*
---------------------------------------快手：-------------------------------------
1. 连续数组 找到给定数字出现次数
2. 连续数字以字符串表示，判断给定第N位出现的数字
   */

/**
抖音研发-互娱
负责抖音资产 注册、采集、识别、离线流程、交付给运营
*/

/**
令牌桶： psm流量信息  分布式令牌桶 在redis里边做  底层是通过incr命令来实现的

*/

/**
9-3号  拼多多一面
1.项目流程   面试官大概意思就是抽取流量做ETL
2.乐观锁和悲观锁区别
3.mysql select 之后 update 怎么分别乐观锁和悲观锁进行实现
乐观锁：数据库加一个version版本号 普通select之后 业务操作  update table set info where id='' and version=''
悲观锁：select ..for update 进行上锁方式
如果数据库中不存在这条记录使用悲观锁方式是否可以进行上锁 我答：如果有记录会进行上锁 没有记录不会进行上锁

4.聚族索引 和 非聚族索引区别

5.redis数据结构 string、hash、set、zset、list 以及 stream 以及地理位置
面试官没动静了 沉默了5秒钟 sds底层原理说起动态字符串根据不同长度来针对不同数据类型  length:5位、1字节、2字节、4字节、8字节
并将packet内存紧凑 禁止发生内存对齐 这是redis的设计

6.kafka如何保证消息投递的可靠性
ack应答机制 broker节点发送到副本上并成功 ack=1 表示投递成功了
并且可以使用retry机制 来保证投递成功
7.kafka broken主节点宕机了，怎么办
zookper会进行leader选取，重副节点中找到一个合适的节点当为leader

算法：二叉树的路径和（不是到叶子节点 是所有节点都适配）

*/
